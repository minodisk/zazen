<!DOCTYPE html>

<html>
<head>
  <title>Zazen</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          
          <h1 id="zazen">Zazen</h1>
<p>zazenはあなたのコードをreadableにします。
zazenは<code>The</code>と<code>then</code>その他の少しのキーワードで構成される、asynchronous processをchainするライブラリです。</p>

          
        

        
      </div>

      
        
        <h2 id="include">Include</h2>
<p>Node</p>

        
          <div class='highlight'><pre>
<span class="hljs-keyword">var</span> zazen = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../zazen'</span>)
  , The = zazen.The
  ;</pre></div>
        
      
        
        <p>browser</p>
<ul>
<li>standalone<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"path/to/zazen.js"</span>&gt;</span><span class="javascript">
&lt;script&gt;
<span class="hljs-keyword">var</span> The = zazen.The;
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
</li>
<li>with jQuery<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"path/to/jquery.js"</span>&gt;</span><span class="javascript">
&lt;script src=<span class="hljs-string">"path/to/jquery.zazen.js"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> The = zazen.The;
</span></span></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
</li>
</ul>

        
      
        
        <h2 id="escape-from-callback-hell">Escape from callback hell</h2>

        
          <div class='highlight'><pre>
<span class="hljs-keyword">var</span> wait = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(duration, callback)</span> {</span>
    setTimeout(callback, duration);
  }
  ;
wait(<span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
  console.log(<span class="hljs-number">1</span>);
  wait(<span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    console.log(<span class="hljs-number">2</span>);
    wait(<span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      console.log(<span class="hljs-number">3</span>);
    });
  });
});</pre></div>
        
      
        
        <p>コールバックで書く非同期処理はネストでreadabilityを失います。
zazenで見通しの良いコードにしましょう。</p>

        
          <div class='highlight'><pre>The
  .wait(<span class="hljs-number">1000</span>)
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    console.log(<span class="hljs-number">1</span>);
  })
  .wait(<span class="hljs-number">1000</span>)
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    console.log(<span class="hljs-number">2</span>);
  })
  .wait(<span class="hljs-number">1000</span>)
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    console.log(<span class="hljs-number">3</span>);
  });</pre></div>
        
      
        
        <h2 id="run-tasks-serially">Run tasks serially</h2>

        
      
        
        <h2 id="run-tasks-parallely">Run tasks parallely</h2>

        
      
        
        <h2 id="handle-errors">Handle errors</h2>

        
      
        
        <h2 id="recover-error">Recover error</h2>

        
      
        
        <h2 id="pomisify">Pomisify</h2>

        
          <div class='highlight'><pre><span class="hljs-keyword">var</span> promisify = zazen.promisify
  , fs = promisify(<span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>))
  , httpGet = promisify(<span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>).get)
  ;</pre></div>
        
      
        
        <h2 id="use-with-underscore-or-lo-dash">Use with underscore or lo-dash</h2>

        
          <div class='highlight'><pre>The
  .parallel(_.map([<span class="hljs-string">'data/a.json'</span>, <span class="hljs-string">'data/b.json'</span>, <span class="hljs-string">'data/c.json'</span>], fs.readFile))
  .then(_.map, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(json)</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(json);
  })
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(objects)</span> {</span>
    console.log(objects);
  });</pre></div>
        
      
        
        <h2 id="distributions">distributions</h2>

        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
